# 吃鸡分析

数据集下载链接:https://www.kaggle.com/skihikingkevin/pubg-match-deaths/data

**agg_match_stats_x.csv**

> - match_id（比赛ID）: The unique match id as generated by pubg.op.gg. You can do a join of this with the kills data to view all information
> - date（时间）: The date and time the match took place
> - game_size（游戏规模）: The total number of teams that were in the game（第一人称还是第三人称）
> - match_mode（比赛模式）: whether the game was played in first-person (fpp) or third-person (tpp)
> - party_size（组队模式）: The maximum number of players per team. e.g 2 implies it was a duo queue system
> - player_name（玩家名称）: Name of the player
> - team_id（队伍ID）: The team id that the player belonged to
> - team_placement（队伍排名）: The final rank of the team within the match
> - player_kills（击杀人数）: Number of kills the player has scored
> - player_dbno（击倒人数）: Number of knockdowns the player has scored
> - player_assists（助攻次数）: Number of assists the player has scored
> - player_dmg（伤害）: Total Hitpoint that the player has dealt
> - player_dist_ride（搭乘距离）: Total distance (in metres?) that the player has travelled in a vehicle
> - player_dist_walk（行走距离）: Total distance (in metres?) that the player has travelled on foot

**kill_match_stats_final_x.csv**

> - killed_by: 死于～
> - killer_name: 杀手名字
> - killer_placement：杀手排名
> - killer_position_x：杀手位置x
> - killer_position_y：杀手位置y
> - map：地图
> - match_id：比赛ID
> - time：存活时间
> - victim_name：被击杀者名字
> - victim_placement：被击杀者排名
> - victim_position_x：被击杀者位置x
> - victim_position_y：被击杀者位置y

## 分析击杀数据

![1571305581684](C:\Users\ADMINI~1\AppData\Local\Temp\1571305581684.png)

```Python
# 数据去重
slay.drop_duplicates(inplace=True)

# 看一下都有什么数据
slay.loc[1]

# 添加是否成功吃鸡列
slay['won'] = slay['team_placement'] == 1
# 添加是否搭乘过车辆列
slay['drove'] = slay['player_dist_ride'] != 0
```

### 击杀数和吃鸡关系

```Python
slay.loc[slay['player_kills'] < 40, ['player_kills', 'won']].groupby('player_kills').won.mean().plot.bar(figsize=(15,6), rot=0, color=np.random.rand(100,3))
plt.xlabel('击杀人数', fontsize=14)
plt.ylabel("吃鸡概率", fontsize=14)
plt.title('击杀人数与吃鸡概率的关系', fontsize=14)
plt.savefig('./击杀人数与吃鸡概率的关系',dpi=100)
```

![img漂亮星图](E:\Jupyter_save\shujufenxi\吃鸡分析\img漂亮星图.png)



### 吃鸡和杀人数的关系

```Python
slay.loc[slay['party_size']!=1, ['player_assists', 'won']].groupby('player_assists').won.mean().plot.bar(figsize=(15,6), rot=0
                                                                                                        , color=np.random.rand(100,3))
plt.xlabel('助攻次数', fontsize=14)
plt.ylabel("吃鸡概率", fontsize=14)
plt.title('助攻次数与吃鸡概率的关系', fontsize=14)
plt.savefig('./助攻次数与吃鸡概率的关系',dpi=100)
```

![助攻次数与吃鸡概率的关系](E:\Jupyter_save\shujufenxi\吃鸡分析\助攻次数与吃鸡概率的关系.png)

### 吃鸡和杀人数的关系

```Python
slay.groupby('drove').won.mean().plot.barh(figsize=(6,3), color=np.random.rand(10,3))
plt.xlabel("吃鸡概率", fontsize=14)
plt.ylabel("是否搭乘过车辆", fontsize=14)
plt.title('搭乘车辆与吃鸡概率的关系', fontsize=14)
plt.yticks([1,0],['是','否'])
plt.savefig('./搭乘车辆与吃鸡概率的关系',dpi=100)
```

![搭乘车辆与吃鸡概率的关系](E:\Jupyter_save\shujufenxi\吃鸡分析\搭乘车辆与吃鸡概率的关系.png)

### 搭乘车辆里程与吃鸡概率的关系

```Python
dist_ride = slay.loc[slay['player_dist_ride']<12000, ['player_dist_ride', 'won']]
labels=["0-1k", "1-2k", "2-3k", "3-4k","4-5k", "5-6k", "6-7k", "7-8k", "8-9k", "9-10k", "10-11k", "11-12k"]
dist_ride['drove_cut'] = pd.cut(dist_ride['player_dist_ride'], 12, labels=labels)

dist_ride.groupby('drove_cut').won.mean().plot.bar(rot=60, figsize=(8,4), color=np.random.rand(30,3))
plt.xlabel("搭乘车辆里程", fontsize=14)
plt.ylabel("吃鸡概率", fontsize=14)
plt.title('搭乘车辆里程与吃鸡概率的关系', fontsize=14)
plt.savefig('./搭乘车辆里程与吃鸡概率的关系',dpi=100)
```

![搭乘车辆里程与吃鸡概率的关系](E:\Jupyter_save\shujufenxi\吃鸡分析\搭乘车辆里程与吃鸡概率的关系.png)

# `death1 = pd.read_csv('kill_match_stats_final_1.csv')` 导入死亡数

结合杀人数 ,---> 杀人和死亡数据集名称要一样 不然可能匹配不到

![1571308207385](E:\Jupyter_save\shujufenxi\吃鸡分析\image\image_1.png)

### 

### 找找落地成盒的玩家

```Python
# 存活不超过2分钟的玩家 落地成盒 ahh
# 存活不超过2分钟的玩家 落地成盒 ahh
death_120_seconds_erg = death_solo.loc[(death_solo['map'] == 'ERANGEL')&(death_solo['time'] < 120)&
                                        (death_solo['victim_position_x']>0), :].dropna()
death_120_seconds_mrm = death_solo.loc[(death_solo['map'] == 'MIRAMAR')&(death_solo['time'] < 120)&
                                        (death_solo['victim_position_x']>0), :].dropna()
display(death_120_seconds_erg.shape, death_120_seconds_mrm.shape)
# 残酷
>>>(198813, 12)
>>>(45598, 12)
```

```Python
# 定位函数
def heatmap(x, y, s, bins=100):
    heatmap, xedges, yedges = np.histogram2d(x, y, bins=bins)
    heatmap = gaussian_filter(heatmap, sigma=s)

    extent = [xedges[0], xedges[-1], yedges[0], yedges[-1]]
    return heatmap.T, extent
from scipy.ndimage.filters import gaussian_filter
import matplotlib.cm as cm
from matplotlib.colors import Normalize
from skimage import io

bg = io.imread('erangel.jpg')
hmap, extent = heatmap(data_erg[:,0], data_erg[:,1], 4.5)
alphas = np.clip(Normalize(0, hmap.max(), clip=True)(hmap)*4.5, 0.0, 1.)
colors = Normalize(0, hmap.max(), clip=True)(hmap)
colors = cm.Reds(colors)
colors[..., -1] = alphas

fig, ax = plt.subplots(figsize=(24,24))
ax.set_xlim(0, 4096); ax.set_ylim(0, 4096)
ax.imshow(bg)
ax.imshow(colors, extent=extent, origin='lower', cmap=cm.Reds, alpha=0.9)
plt.gca().invert_yaxis()
plt.savefig('./落地成盒',dpi=100)
```

![落地成盒](E:\Jupyter_save\shujufenxi\吃鸡分析\落地成盒.png)

这个是17年 刚出的时候数据吧 = = 那时候都是怼机场和学校的  = =

```Python
bg = io.imread('miramar.jpg')
hmap, extent = heatmap(data_mrm[:,0], data_mrm[:,1], 4)
alphas = np.clip(Normalize(0, hmap.max(), clip=True)(hmap)*4, 0.0, 1.)
colors = Normalize(0, hmap.max(), clip=True)(hmap)
colors = cm.Reds(colors)
colors[..., -1] = alphas

fig, ax = plt.subplots(figsize=(24,24))
ax.set_xlim(0, 1000); ax.set_ylim(0, 1000)
ax.imshow(bg)
ax.imshow(colors, extent=extent, origin='lower', cmap=cm.Reds, alpha=0.9)
plt.gca().invert_yaxis()
plt.savefig('./落地成盒_沙漠',dpi=100)
```

![落地成盒_沙漠](E:\Jupyter_save\shujufenxi\吃鸡分析\落地成盒_沙漠.png)

毒区最后的位置 也就是最后几名玩家在的地方

```Python
bg = io.imread('erangel.jpg')
hmap, extent = heatmap(final_circle_erg[:,0], final_circle_erg[:,1], 1.5)
alphas = np.clip(Normalize(0, hmap.max(), clip=True)(hmap)*1.5, 0.0, 1.)
colors = Normalize(0, hmap.max(), clip=True)(hmap)
colors = cm.Reds(colors)
colors[..., -1] = alphas

fig, ax = plt.subplots(figsize=(24,24))
ax.set_xlim(0, 4096); ax.set_ylim(0, 4096)
ax.imshow(bg)
ax.imshow(colors, extent=extent, origin='lower', cmap=cm.Reds, alpha=0.9)
plt.gca().invert_yaxis()
plt.savefig('./毒区',dpi=100)
```

![毒区](E:\Jupyter_save\shujufenxi\吃鸡分析\毒区.png)

### 统计什么武器杀人最多

```Python
erg_died_of['killed_by'].value_counts()[:10].plot.barh(figsize=(10,5), color=np.random.rand(100,3))
plt.xlabel("被击杀人数", fontsize=14)
plt.ylabel("击杀的武器", fontsize=14)
plt.title('武器跟击杀人数的统计(绝地海岛艾伦格)', fontsize=14)
plt.yticks(fontsize=12)
plt.savefig('./武器跟击杀人数的统计',dpi=100)
```

![武器跟击杀人数的统计](E:\Jupyter_save\shujufenxi\吃鸡分析\武器跟击杀人数的统计.png)

亏我还一直用M416配98K   就算98K没啥鸟用 也得带着啊哈哈

### 近战武器杀人统计

转换杀人距离

```Python
# 把位置信息转换成距离，以“米”为单位
erg_distance = np.sqrt(((erg_died_of['killer_position_x']-erg_died_of['victim_position_x'])/100)**2 + 
                       ((erg_died_of['killer_position_y']-erg_died_of['victim_position_y'])/100)**2)
mrm_distance = np.sqrt(((mrm_died_of['killer_position_x']-mrm_died_of['victim_position_x'])/100)**2 + 
                       ((mrm_died_of['killer_position_y']-mrm_died_of['victim_position_y'])/100)**2)
```

```Python
# 近战武器
erg_died_of.loc[erg_distance<10, 'killed_by'].value_counts()[:10].plot.bar(rot=30, color=np.random.rand(50,3))
plt.xlabel("近战武器", fontsize=14)
plt.ylabel("被击杀的人数", fontsize=14)
plt.title('近战武器跟击杀人数的统计(绝地海岛艾伦格)', fontsize=14)
plt.yticks(fontsize=12)
plt.savefig('./近战武器',dpi=100)
```

![近战武器](E:\Jupyter_save\shujufenxi\吃鸡分析\近战武器.png)

